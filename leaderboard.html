

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <style>:root {
        --bg-color: #081b29;
        --second-bg-color: #112e42;
        --text-color: #ededed;
        --main-color: #00abf0;
        --header-bg-color: #1c2a38;
        --row-hover-bg-color: #1e3a4b;
        --border-color: #00abf0;
        --glow-color: #00abf0; /* Main color for glow effect */
    }
    
    body {
        font-family: 'Roboto', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0;
        padding: 0; /* Removed padding here */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: auto; /* Added to handle any overflow */
    }
    
    header.header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        padding: 1rem 5%;
        background: var(--bg-color); /* Changed to ensure visibility */
        display: flex;
        justify-content: center; /* Centering the logo */
        align-items: center;
        z-index: 100;
        transition: .3s;
    }
    
    .header .logo img {
        height: auto;
        width: 150px;
    }
    
    header .team-info {
        display: none; /* Hidden since not used in the current layout */
    }
    
    h1 {
        color: var(--main-color);
        margin-top: 80px; /* Added margin to ensure space for the fixed header */
        margin-bottom: 20px;
        font-size: 2.5rem;
        text-align: center; /* Centered text */
    }
    
    table {
        border-collapse: collapse;
        width: 90%;
        max-width: 800px;
        background-color: var(--second-bg-color);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0px 0px 20px rgba(0, 255, 255, 0.6);
        border: 2px solid #00ffff;
    }
    
    th, td {
        padding: 12px;
        border: 1px solid var(--border-color);
    }
    
    th {
        background-color: var(--header-bg-color);
        color: var(--main-color);
        font-weight: 600;
    }
    
    tr:nth-child(even) {
        background-color: #1a2a38;
    }
    
    tr:nth-child(odd) {
        background-color: #112e42;
    }
    
    tr:hover {
        background-color: var(--row-hover-bg-color);
    }
    
    td {
        text-align: center;
        font-size: 1rem;
    }
    
    #team-rank {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--text-color);
        padding: 10px 20px;
        border: 2px solid var(--glow-color);
        border-radius: 50px;
        text-align: center;
        background: rgba(0, 0, 0, 0.1); /* Semi-transparent background */
        box-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
        animation: pulse 1.5s infinite;
    }
    
    @media (max-width: 768px) {
        table {
            width: 100%;
            font-size: 0.9rem;
        }
    
        h1 {
            font-size: 2rem;
        }
    
        #team-rank {
            font-size: 1.2rem;
            padding: 8px 16px;
            border-width: 1.5px;
            box-shadow: 0 0 8px var(--glow-color), 0 0 16px var(--glow-color);
        }
    }
    
    @media (max-width: 480px) {
        h1 {
            font-size: 1.5rem;
        }
    
        td {
            font-size: 0.8rem;
            padding: 8px;
        }
    
        #team-rank {
            font-size: 1rem;
            padding: 6px 12px;
            border-width: 1px;
            box-shadow: 0 0 6px var(--glow-color), 0 0 12px var(--glow-color);
        }
    }
    
    @keyframes pulse {
        0% {
            box-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
        }
        50% {
            box-shadow: 0 0 20px var(--glow-color), 0 0 40px var(--glow-color);
        }
        100% {
            box-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
        }
    }
       </style>
</head>
<body>
        <!-- <div class="team-info">
          <div class="team-circle" id="teamCircle">T</div>
          <div class="team-name" id="teamNameDisplay">Team Name</div>
        </div>
        <div class="bx bx-menu" id="menu-icon"><span class="animate" style="--i:1;"></span></div>
      </header> -->
    <!-- <div><p id="team-rank"></p></div> -->
    <div style="width: 90%; display: flex; flex-direction: column;align-items: center;">
        <h1>Leaderboard</h1>
        <table id="leaderboard">
            <thead>
                <tr>
                    <th>Position</th>
                    <th>Team Name</th>
                    <th>Sum Score</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- Include PapaParse library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <script>
        // function displayTeamInfo() {
        //   const teamName = localStorage.getItem('registeredTeam');
        //   console.log('Retrieved team name:', teamName);
      
        //   if (teamName) {
        //     document.getElementById('teamNameDisplay').textContent = teamName;
        //     document.getElementById('teamCircle').textContent = teamName.charAt(0).toUpperCase();
        //   } else {
        //     document.getElementById('teamNameDisplay').textContent = '';
        //     document.getElementById('teamCircle').textContent = 'T'; // Default placeholder
        //   }
        // }
        
        window.onload = function() {
          // displayTeamInfo();
          fetchAndUpdateLeaderboard();
        };
      
        const csvUrl = 'https://docs.google.com/spreadsheets/d/1zjwXDmD-RpmFBYouBmuAajkpevqYEdg5EA1qVTKN2Qg/pub?output=csv';
      
        function fetchAndUpdateLeaderboard() {
          fetch(csvUrl)
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
              }
              return response.text();
            })
            .then(data => {
              console.log('CSV data:', data);
              Papa.parse(data, {
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                  console.log('Parsed data:', results.data);
                  const data = results.data;
                  const scores = {};

                  data.forEach(row => {
                    console.log('Row:', row);
                    const teamName = row['Enter your Team Name.'];
                    const score = row['sum Score'];

                    if (teamName && !isNaN(score)) {
                      if (!scores[teamName]) {
                        scores[teamName] = 0;
                      }
                      scores[teamName] += parseFloat(score);
                    }
                  });

                  console.log('Scores:', scores);
                  const sortedTeams = Object.keys(scores).sort((a, b) => scores[b] - scores[a]);
                  const totalTeams = sortedTeams.length;
                  const tbody = document.querySelector('#leaderboard tbody');
                  const teamRank = document.getElementById('team-rank');
                  let registeredTeamRank = -1;

                  tbody.innerHTML = '';

                  sortedTeams.forEach((team, index) => {
                    const row = document.createElement('tr');
                    const positionCell = document.createElement('td');
                    const teamCell = document.createElement('td');
                    const scoreCell = document.createElement('td');

                    positionCell.textContent = index + 1;
                    teamCell.textContent = team;
                    scoreCell.textContent = scores[team];

                    row.appendChild(positionCell);
                    row.appendChild(teamCell);
                    row.appendChild(scoreCell);
                    tbody.appendChild(row);

                  //   if (team === localStorage.getItem('registeredTeam')) {
                  //     registeredTeamRank = index + 1;
                  //   }
                  });

                  // if (registeredTeamRank > -1) {
                  //   teamRank.textContent = `# ${registeredTeamRank}/${totalTeams}`;
                  // } else {
                  //   teamRank.textContent = 'Not in leaderboard';
                  // }
                },
                error: function(error) {
                  console.error('Error parsing CSV data:', error);
                }
              });
            })
            .catch(error => console.error('Error fetching data:', error));
        }

        setInterval(fetchAndUpdateLeaderboard, 5000);
    </script>
</body>
</html>

